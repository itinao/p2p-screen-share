<!DOCTYPE HTML>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Share | Desktop Capture Share</title>
  <link rel="shortcut icon" href="../img/favicon.ico">
  <link rel="stylesheet" href="../build/css/share.min.css">
  <script type="text/javascript" src="../build/vendors/polymer/platform/platform.js"></script>
</head>
<body unresolved>

<link rel="import" href="../build/vendors/polymer/core-toolbar/core-toolbar.html">
<link rel="import" href="../build/vendors/polymer/core-icon-button/core-icon-button.html">
<link rel="import" href="../build/components/peer-video.html">
<link rel="import" href="../build/components/x-loading.html">

<core-toolbar class="tall">
  <span flex>Desktop Capture Share</span>
  <core-icon-button id="home-button" icon="home"></core-icon-button>
  <core-icon-button id="fullscreen-button" icon="fullscreen"></core-icon-button>
</core-toolbar>

<div id="video-content" class="video-content">
  <peer-video id="peer-video" hidden class="content-animation" host="screen-share-signaling.itinao.asia" port="8080" path="/share" debug="2"></peer-video>
</div>

<x-loading id="loading"></x-loading>


<script>
document.addEventListener('polymer-ready', function(e) {
  var videoContent = window['video-content'];
  var homeButton = window['home-button'];
  var fullscreenButton = window['fullscreen-button'];

  // homeへ
  homeButton.addEventListener('click', function(event) {
    window.open("index.html");
  });

  // フルスクリーン化
  fullscreenButton.addEventListener('click', function(event) {
    videoContent.classList.add("fullscreen");
  });

  // フルスクリーン化 解除
  videoContent.addEventListener('click', function(event) {
    videoContent.classList.remove("fullscreen");
  });

  // Load時のアニメーション
  var peerVideo = window['peer-video'];
  var loading = window['loading'];
  peerVideo.onStreamCallback = function() {
    setTimeout(function() {// loadしてる感を出すため300ms
      loading.remove();
      peerVideo.hidden = false;
    }, 300);
  };
});
</script>


</body>
</html>
